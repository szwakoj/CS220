
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../lessons/3_binary_hex/">
      
      
        <link rel="next" href="../../homework/how_to_hand_in/">
      
      
        
      
      
      <link rel="icon" href="../../img/cs220.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>C Compilation - CS 220 - Computer Organization</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#c-compilation-objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CS 220 - Computer Organization" class="md-header__button md-logo" aria-label="CS 220 - Computer Organization" data-md-component="logo">
      
  <img src="../../img/cs220.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CS 220 - Computer Organization
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              C Compilation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0 9.821 9.821 0 0 0-17.64 0"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../syllabus/" class="md-tabs__link">
        
  
  
    
  
  Syllabus

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../schedule/" class="md-tabs__link">
        
  
  
    
  
  Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lessons/1_introduction/" class="md-tabs__link">
          
  
  
  Lessons

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Labs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../homework/how_to_hand_in/" class="md-tabs__link">
          
  
  
  Homework

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CS 220 - Computer Organization" class="md-nav__button md-logo" aria-label="CS 220 - Computer Organization" data-md-component="logo">
      
  <img src="../../img/cs220.png" alt="logo">

    </a>
    CS 220 - Computer Organization
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syllabus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syllabus
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lessons
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lessons
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lessons/1_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lessons/2_reviewing_c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reviewing C
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lessons/3_binary_hex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Binary and Hex
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Labs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Labs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    C Compilation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    C Compilation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-setting-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Setting up
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Setting up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-test-subjects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Test Subjects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-xxd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing xxd
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-preprocessing" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Preprocessing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Preprocessing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab-questions_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-compilation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Compilation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab-questions_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Assembly
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab-questions_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-linking" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Linking
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Homework
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Homework
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../homework/how_to_hand_in/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How To Hand In
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../homework/gcc_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Software
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../homework/1_c_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Homework 1 (Due 2/20/26)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../homework/2_test_1_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Homework 2 (Due 3/13/26)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-setting-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Setting up
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Setting up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-test-subjects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Test Subjects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-xxd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing xxd
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-preprocessing" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Preprocessing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Preprocessing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab-questions_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-compilation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Compilation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Compilation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab-questions_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Assembly
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab-questions_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Questions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-linking" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Linking
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Home
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="./" class="md-path__link">
          
  <span class="md-ellipsis">
    Labs
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="c-compilation-objects">C Compilation Objects</h1>
<p>To go from human-readable C code to a running program on a computer requires a few steps of processing before being converted to the <strong>machine code</strong> that ultimately is what the computer runs on the CPU. </p>
<p>This lab will use a few <code>gcc</code> command flags to extract our those intermediate forms of the program we made. To reiterate the compilation process in the <a href="../../lessons/2_reviewing_c/">C review lesson</a>, there are four main steps in C compilation:</p>
<ol>
<li><strong>Preprocessing</strong>: The C preprocessor (CPP) formats the source code using macros like <code>#include</code> or <code>#define</code>, including needed headers and applying any user-defined changes before passing to the next step</li>
<li><strong>Compilation</strong>: The compiler translates C source code into assembly language</li>
<li><strong>Assembly</strong>: The assembler then converts the assembly code into machine code, producing object files, <code>.o</code> or <code>.obj</code>, as a result</li>
<li><strong>Linking</strong>: The linker orders the object files properly and combines them into a single executable program that is ready to run on the target system</li>
</ol>
<p>Each one of these steps produces distinct products that we can look closer at to understand the process a bit more. In order to do that, we will need another tool to be added to our system PATHs. <code>xxd</code> is a command-line tool that exposes the raw binary and hexadecimal values of files for us. It can be downloaded <a href="https://sourceforge.net/projects/xxd-for-windows/">here</a> for Windows. in order for it to be visible to your PATH easily, copy the <code>xxd.exe</code> inside of the zip file and place it inside of the <code>C:mingw64/bin/</code> folder. For Linux and Mac, it is probably already installed in the terminal, if not:
- For Linux: Use your package manager to install <code>xxd</code>
- For Mac: Use Brew to install <code>xxd</code> similar to <a href="../../homework/gcc_install/">here</a></p>
<p>Another level of this lab is the descent down into the abstraction hierarchy from a relatively high-level language to assembly and finally to machine code:</p>
<p><img alt="Layers of abstraction diagram. From top to bottom, &quot;Application&quot;, &quot;Algorithm&quot;, &quot;Programming Language&quot;, &quot;Assembly Language&quot;, &quot;Machine Code&quot;, &quot;Instruction Set Architecture&quot;, &quot;Micro Architecture&quot;, &quot;Logic Gates, Registers&quot;, &quot;IC's and Transistors&quot;, and, &quot;Electronics and Physics&quot;. On the left are two scales of magnitude. The first is Complexity, indicating that the &quot;Application&quot; layer is the least complex and the &quot;Electronics and Physics&quot; layer as most complex, with everything in between rated by their organization. The second scale is &quot;Abstraction&quot;, indicating that the &quot;Application&quot; layer is the most abstract and the &quot;Electronics and Physics&quot; layer as least abstract, with everything in between rated by their organization. There is a division on the right separating Software and Hardware, centered at &quot;Instruction Set Architecture&quot;, signifying that everything above is &quot;Software&quot; and everything below as &quot;Hardware&quot;." src="../../img/Layers-Of-Abstraction.jpg" /></p>
<h2 id="1-setting-up">1. Setting up</h2>
<h4 id="creating-test-subjects">Creating Test Subjects</h4>
<ul>
<li>Open a new folder/directory somewhere to store your labs and create a new file named <code>hello.c</code>. Open it in Sublime Text, or whatever editor you are using, and enter in a simple "Hello World" program:</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">// hello.c</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">{</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">);</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>Create a second file named <code>add.c</code> with the following contents:</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// add.c</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">{</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">777</span><span class="p">;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">711</span><span class="p">;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>Create a third file named <code>pre_process.c</code> with the following contents (its purpose will be revealed later):</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// pre_process.c</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="cp">#define COPY PASTE</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="cp">#define want_to_be AM</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">COPY</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">COPY</span><span class="p">,</span><span class="n">COPY</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="n">COPYCOPY</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;include.h&quot;</span>
</span></code></pre></div>
<ul>
<li>Create a fourth file named <code>include.h</code> with the following contents (its purpose will be revealed later):</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// include.h</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">I</span><span class="w"> </span><span class="n">want_to_be</span><span class="w"> </span><span class="n">included</span><span class="o">!</span>
</span></code></pre></div>
<p>You should have a directory structure like this:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>compile_lab/
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>├── hello.c
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>├── add.c
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>├── pre_process.c
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>└── include.h
</span></code></pre></div>
<h4 id="testing-xxd">Testing <code>xxd</code></h4>
<p>To understand a little bit about <code>xxd</code> we will use it on one of our simple test subject files.</p>
<ul>
<li>
<p>Open a cmd or terminal and navigate to <code>compile_lab</code> using <code>cd</code>, or wherever you put the files from the previous step. </p>
</li>
<li>
<p>Run the command <code>xxd hello.c</code>. You should see something like this:</p>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>00000000: 2f2f 2068 656c 6c6f 2e63 0d0a 2369 6e63  // hello.c..#inc
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>00000010: 6c75 6465 203c 7374 6469 6f2e 683e 0d0a  lude &lt;stdio.h&gt;..
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>00000020: 0d0a 696e 7420 6d61 696e 2876 6f69 6429  ..int main(void)
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>00000030: 0d0a 7b0d 0a09 7072 696e 7466 2822 4865  ..{...printf(&quot;He
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>00000040: 6c6c 6f20 576f 726c 6421 2229 3b0d 0a09  llo World!&quot;);...
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>00000050: 0d0a 0972 6574 7572 6e20 303b 0d0a 7d    ...return 0;..}
</span></code></pre></div>
<p>This is called the <strong>hex dump</strong> of the <code>hello.c</code> file. It is the raw information within <code>hello.c</code> rendered into hexadecimal representation alongside its ASCII translation. We can also see it in raw binary.</p>
<ul>
<li>Run <code>xxd -b hello.c</code>. Using the <code>-b</code> flag to create a <strong>binary dump</strong>:</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>00000000: 00101111 00101111 00100000 01101000 01100101 01101100  // hel
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>00000006: 01101100 01101111 00101110 01100011 00001101 00001010  lo.c..
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>0000000c: 00100011 01101001 01101110 01100011 01101100 01110101  #inclu
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>00000012: 01100100 01100101 00100000 00111100 01110011 01110100  de &lt;st
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>00000018: 01100100 01101001 01101111 00101110 01101000 00111110  dio.h&gt;
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>0000001e: 00001101 00001010 00001101 00001010 01101001 01101110  ....in
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>00000024: 01110100 00100000 01101101 01100001 01101001 01101110  t main
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>0000002a: 00101000 01110110 01101111 01101001 01100100 00101001  (void)
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>00000030: 00001101 00001010 01111011 00001101 00001010 00001001  ..{...
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>00000036: 01110000 01110010 01101001 01101110 01110100 01100110  printf
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>0000003c: 00101000 00100010 01001000 01100101 01101100 01101100  (&quot;Hell
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>00000042: 01101111 00100000 01010111 01101111 01110010 01101100  o Worl
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>00000048: 01100100 00100001 00100010 00101001 00111011 00001101  d!&quot;);.
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>0000004e: 00001010 00001001 00001101 00001010 00001001 01110010  .....r
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>00000054: 01100101 01110100 01110101 01110010 01101110 00100000  eturn
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>0000005a: 00110000 00111011 00001101 00001010 01111101           0;..}
</span></code></pre></div>
<p>These are showing the same information just in different forms. Often times, when doing low-level work, programmers will use hexadecimal representation as a way to condense the raw binary values to do quicker analysis. You can see its usefulness by how many lines and digits it takes to display the same file in each representation.</p>
<p>We will be using <code>xxd</code> to view the raw information as we compile our code down the abstraction hierarchy. We have seen the top of it, human-readable C code, now lets look at the final executable. 
- Run <code>gcc hello.c -o hello.exe</code> or whatever your OS's executable extension is. 
- Now run <code>xxd hello.exe</code>. 
- Your subsequent terminal scrolling output will tell you there's a lot to go from <code>hello.c</code> to <code>hello.exe</code>.</p>
<h4 id="lab-questions">Lab Questions</h4>
<ol>
<li>Use <code>xxd</code> on <code>preprocess.c</code>. Looking at the first line of characters of both files (including comments), you may be able to pick out common pattern in the characters used.<ol>
<li>How long is each character in hex digits?</li>
<li>Find three and match them up their <code>char</code> counterparts.</li>
<li>Use <code>xxd -b</code>, how many bits does each char take up? Does this make sense with what you know about C's data types?</li>
</ol>
</li>
</ol>
<h2 id="2-preprocessing">2. Preprocessing</h2>
<p>The first compilation step we will look at is the <strong>preprocessing step</strong> where <code>gcc</code> parses the <code>.c</code> file and applies any preprocessor macros like <code>#include &lt;...&gt;</code> or <code>#define</code>. To see the basic process, we will use the <code>pre_proces.c</code> file. </p>
<ul>
<li>
<p>Run <code>gcc -E pre_process.c -o pre_process.i</code> to create an <strong>expanded source code file</strong></p>
</li>
<li>
<p>It will look like this when viewed using Sublime Text:</p>
</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="cp"># 0 &quot;pre_process.c&quot;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="cp"># 0 &quot;&lt;built-in&gt;&quot;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="cp"># 0 &quot;&lt;command-line&gt;&quot;</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="cp"># 1 &quot;pre_process.c&quot;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="n">PASTE</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="n">PASTE</span><span class="p">,</span><span class="n">PASTE</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="n">COPYCOPY</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="cp"># 1 &quot;include.h&quot; 1</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="n">I</span><span class="w"> </span><span class="n">AM</span><span class="w"> </span><span class="n">included</span><span class="o">!</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="cp"># 12 &quot;pre_process.c&quot; 2</span>
</span></code></pre></div>
<ul>
<li>Compare it to what we originally put inside of it. What do you notice?</li>
</ul>
<p>This small example shows the nature of the preprocessing step in C, it applies simple copy-paste operations on the source code file to prepare it for the rest of the compilation journey. At this level we are still at the human-read able, programming language level of the abstraction hierarchy. </p>
<h4 id="lab-questions_1">Lab Questions</h4>
<ol>
<li>Using the same process as above, create <code>hello.i</code>. Open it in Sublime Text.<ol>
<li>Using "Ctrl+F", find your "Hello World" message. Where is it?</li>
<li>Now find all instances of <code>printf</code>. What do you notice <code>#include &lt;stdio.h&gt;</code> does for your program.</li>
<li>Every function in C, if not defined at the top before <code>main</code>, must have both a declaration and a definition defined. Either way a definition needs to be given to use the file. Try to find a definition for a <code>stdio.h</code> function. Can you? What does this mean?</li>
</ol>
</li>
</ol>
<h2 id="2-compilation">2. Compilation</h2>
<p>The second step of the compilation process is actually compiling C code into assembly code. This step takes us our first level down the abstraction hierarchy, going from easily human-readable programming languages to assembly.</p>
<p>Assembly code is a slightly easier interface to program a computer at a low-level. It boils down to labeled machine-code instructions that inform their function. For example, the assembly instruction <code>add eax, ebx</code> (add the number in <code>eax</code> and <code>ebx</code> together) is translated into <code>0x03C3</code>into machine-code hex. Where <code>03</code> represents the <code>add</code> instruction and <code>C3</code> the operands <code>eax</code> and <code>ebx</code>. </p>
<p>At this step we will see the assembly instructions, know that they are still not the code that is run on the computer. It is still a textual representation of computer code that exists to make it easier for humans to read. </p>
<ul>
<li>Run <code>gcc -S hello.c -o hello.asm</code> and open <code>hello.asm</code> in Sublime Text:</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="w">    </span><span class="na">.file</span><span class="w">   </span><span class="s">&quot;hello.c&quot;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="na">.text</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="na">.section</span><span class="w"> </span><span class="no">.rdata</span><span class="p">,</span><span class="s">&quot;dr&quot;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nl">.LC0:</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="na">.ascii</span><span class="w"> </span><span class="s">&quot;Hello World!\0&quot;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="na">.text</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="na">.globl</span><span class="w">  </span><span class="no">main</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="na">.def</span><span class="w">    </span><span class="no">main</span><span class="c1">;   .scl    2;  .type   32; .endef</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="na">.seh_proc</span><span class="w">   </span><span class="no">main</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="nl">main:</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="nf">pushq</span><span class="w">   </span><span class="nv">%rbp</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="na">.seh_pushreg</span><span class="w">    </span><span class="nv">%rbp</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="nf">movq</span><span class="w">    </span><span class="nv">%rsp</span><span class="p">,</span><span class="w"> </span><span class="nv">%rbp</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">    </span><span class="na">.seh_setframe</span><span class="w">   </span><span class="nv">%rbp</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">    </span><span class="nf">subq</span><span class="w">    </span><span class="no">$32</span><span class="p">,</span><span class="w"> </span><span class="nv">%rsp</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="na">.seh_stackalloc</span><span class="w"> </span><span class="mi">32</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">    </span><span class="na">.seh_endprologue</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">    </span><span class="nf">call</span><span class="w">    </span><span class="no">__main</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="nf">leaq</span><span class="w">    </span><span class="no">.LC0</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span><span class="w"> </span><span class="nv">%rax</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">    </span><span class="nf">movq</span><span class="w">    </span><span class="nv">%rax</span><span class="p">,</span><span class="w"> </span><span class="nv">%rcx</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">    </span><span class="nf">call</span><span class="w">    </span><span class="no">__mingw_printf</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">    </span><span class="nf">movl</span><span class="w">    </span><span class="no">$0</span><span class="p">,</span><span class="w"> </span><span class="nv">%eax</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">    </span><span class="nf">addq</span><span class="w">    </span><span class="no">$32</span><span class="p">,</span><span class="w"> </span><span class="nv">%rsp</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">    </span><span class="nf">popq</span><span class="w">    </span><span class="nv">%rbp</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">    </span><span class="nf">ret</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">    </span><span class="na">.seh_endproc</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">    </span><span class="na">.def</span><span class="w">    </span><span class="no">__main</span><span class="c1">; .scl    2;  .type   32; .endef</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">    </span><span class="na">.ident</span><span class="w">  </span><span class="s">&quot;GCC: (MinGW-W64 x86_64-msvcrt-posix-seh, built by Brecht Sanders, r1) 15.2.0&quot;</span>
</span></code></pre></div>
<p>This is the translated assembly code from our <code>hello.c</code> notice how all the extra information at the top of the preprocessed file is not included here, rather the assembly contains only the reference to the code we need to call, <code>call   __mingw_printf</code>. Ultimately, <code>printf</code>'s assembly code is pre-compiled somewhere in the mingw library and will be linked later in the process.</p>
<h3 id="lab-questions_2">Lab Questions</h3>
<ol>
<li>Its not obvious how the <code>call    __mingw_printf</code> knows what to print while in <code>main:</code>.<ol>
<li>Find your message in the assembly.</li>
<li>See where it is located and use that information to look near the call to <code>__mingw_printf</code> and locate when your message is used in main.</li>
</ol>
</li>
<li>Using the same process as we used to create <code>hello.asm</code>, create <code>add.asm</code> from <code>add.c</code>.<ol>
<li>We used very recognizable numbers for the addition. Find them in the assembly.</li>
<li>Using context clues, try to figure out where they are added. Be careful, there can be more than one add operation in a file. For example, <code>hello.asm</code> also has an <code>addq</code> op at the end of it despite having no adding in the program. Find the correct one.</li>
</ol>
</li>
</ol>
<h2 id="3-assembly">3. Assembly</h2>
<p>Once the assembly is generated, it must be converted to its machine-code translation. This is where we step over the line completely and there is no human-readable components other than debug information. This step squarely sits us at the <strong>machine code layer</strong> in the abstraction hierarchy, where we are talking directly to the computer as close as we can as programmers. The object (<code>.obj</code>) files that the next step produces represent structured binary files containing machine code alongside metadata like symbol tables and relocation information. This structure is what makes linking possible — the linker reads that metadata to know how to stitch the pieces together. As such we now switch over from Sublime Text, back to <code>xxd</code> for viewing.</p>
<p>These are pieces of code that are ran directly on the CPU, however the path to send it there is very different based on the OS on the system (if there is one!). Each <code>.obj</code> represents a snippet of machine-code that will be formatted for the host system for later running — either linked together with other <code>.obj</code> files into a final executable, or standing alone to be wrapped in OS-specific executable formatting, like PE on Windows or ELF on Linux.</p>
<ul>
<li>
<p>Run  <code>gcc -c hello.c -o hello.obj</code>.</p>
</li>
<li>
<p>Follow up with: <code>xxd hello.obj</code>:</p>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>00000000: 6486 0700 0000 0000 1002 0000 1400 0000  d...............
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>00000010: 0000 0400 2e74 6578 7400 0000 0000 0000  .....text.......
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>00000020: 0000 0000 3000 0000 2c01 0000 d401 0000  ....0...,.......
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>00000030: 0000 0000 0300 0000 2000 5060 2e64 6174  ........ .P`.dat
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>00000040: 6100 0000 0000 0000 0000 0000 0000 0000  a...............
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>... (Run it on your own)
</span></code></pre></div>
<p>This may seem like gibberish even with the ASCII representation on the side. However, the large section of random characters in the middle represent machine-code instructions and their operands being sent to the CPU for Fetching, Decoding and Execution. </p>
<h3 id="lab-questions_3">Lab Questions</h3>
<ol>
<li>Where is your "Hello World" message? Does its position tell you when the information is used?</li>
<li>Can you find the place that is looking to be linked with <code>printf</code>'s machine-code?</li>
<li>Go into <code>add.c</code>, change both of the number being added to <code>0xFFFFFFFF</code>. Do the process above and make <code>add.obj</code>. Find where there are a bunch of <code>f</code>'s bunched up.</li>
<li>Go back into <code>add.c</code>, change both numbers to this <code>0x0DF0EFBE</code>. Create the new <code>.obj</code>. Look inside the hex for the answer to the question, "Moo..., The best kind of food is..." near where you saw all the <code>f</code>'s.</li>
</ol>
<h3 id="4-linking">4. Linking</h3>
<p>This is the final step where the final executable is put together and made ready to run for the host system. If you followed along since the beginning you would have seen what the final executable looks like in <code>xxd</code>, a very large dump contains a lot of metadata and machine code instructions. A lot goes into even just printing "Hello World". </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.sections", "navigation.expand"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascript/wcag_fixes.js"></script>
      
        <script src="../../javascript/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>